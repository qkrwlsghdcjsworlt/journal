<hr />

<p>DMFT 계산을 할 수 있는 TRIQS 를 설치하면서 몇가지 메모를 한다.</p>

<hr />
<h4 id="성공함">성공함.</h4>

<p>2018/05/16 (수)</p>

<ul>
  <li>결국이 이것도 docker 로 설치해보자.</li>
</ul>

<p>docker (ubuntu) + miniconda 로 설치하려고 했는데 실패. python 을 설치할 것이 아니라, 처음 부터 miniconda를 설치해보자.</p>

<p>–&gt; 성공했다. 순서는</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ubuntu
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -t -i ubuntu /bin/bash
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get update
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get install libboost-all-dev cmake git g++ libgfortran3 gfortran openmpi-bin openmpi-common \
     openmpi-doc libopenmpi-dev libblas-dev liblapack-dev libfftw3-dev libgmp-dev \
     hdf5-tools libhdf5-serial-dev python-h5py python-dev python-numpy python-scipy python-jinja2 \
     python-virtualenv python-matplotlib python-tornado python-zmq python-mpi4py python-mako \
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get install python-notebook
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 60 --slave /usr/bin/g++ g++ /usr/bin/g++-7
</code></pre></div></div>

<p>이 순서로 하고</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/TRIQS/triqs.git triqs.src
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir triqs.build &amp;&amp; cd triqs.build
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -DCMAKE_INSTALL_PREFIX=path_to_install_directory ../triqs.src
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make
make test
make install
</code></pre></div></div>

<p>하면 설치된다.</p>

<p>문제는 $Display  설정이 되어있지 않다는 점인데, 좀 더 알아봐야된다.</p>

<hr />

<hr />

<hr />

<h4 id="실패한-것-기록">실패한 것 기록</h4>

<p>이것이 기본 cmake 명령어.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -DCMAKE_INSTALL_PREFIX=path_to_install_directory ../triqs.src
</code></pre></div></div>

<hr />

<p>기존에 설치된 python은 h5py의 hdf5 버전이 c-compiler hdf5 버전과 달라서 cmake 가 되지 않는다. 그래서 기존의 python이 아니라 miniconda를 설치해야된다.</p>

<hr />

<p>miniconda 를 <code class="highlighter-rouge">(/Users/parkjinhong/miniconda2/bin/python)</code> 에 설치한다.</p>

<p>다음 python interpreter로 miniconda python을 설정하는데 그방법은</p>

<p>/Users/parkjinhong/Dropbox/2-study/my_project/Triqs/triqs.build/CMakeCache.txt 에서</p>

<p>PYTHON_INTERPRETER:UNINITIALIZED=/Users/parkjinhong/miniconda2/bin/python 으로 직접 수정한다.</p>

<hr />

<p>Using the clang compiler 이라는 부분에서 cxx clang 을 추가하는 명령어를 찾았다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CXX=clang++ cmake -DCMAKE_INSTALL_PREFIX=path_to_install_directory ../triqs.src
</code></pre></div></div>
<p>이것으로 compile 했는데, make test 하면 전부 compile 된것은 아니였다. 절반만 compile 되었다.</p>

<p>어쨌든 make install 할 수 있는데, 이렇게 하면 triqs 는 설치된다.</p>

<p>그때의 폴더는 <code class="highlighter-rouge">triqs.build/path_to_install_directory</code> 이고 명령어는   <code class="highlighter-rouge">triqs.build/path_to_install_directory/bin/pytriqs</code> 이다.</p>

<hr />
<p>tutorial 을 해보면 첫번째 Green’s function tutorial 은 잘 실행이 되는데,  사각격자의 tight-binding model은 실해되지 않는다. ㅜㅜ</p>

<hr />

<p>혹시 실행안되는 이유가 clang 을 써서 그렇지 않을까?  gcc compiler 를 쓰면 어떨지 궁금하다.</p>

